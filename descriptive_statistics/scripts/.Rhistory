install.packages("NHANES")
install.packages("kableExtra")
library(tidyverse)
library(NHANES)
library(kableExtra)
?recode
color_1 = "dimgray"
font_size = 8
# Drop data that won't be used
health_data <- NHANES %>%
filter(SurveyYr == "2011_12",
is.na(HealthGen) == FALSE) %>%
select(Age, HealthGen) %>%
mutate(HealthGen = recode(HealthGen, "Vgood" = "Very good"))
# Produce a plot
health_data %>%
ggplot(aes(x = HealthGen, y = Age)) +
geom_boxplot(color = color_1) +
scale_x_discrete(labels = c("Excellent",
"Very good",
"Good",
"Fair",
"Poor")) +
scale_y_continuous(breaks = seq(10, 80, 10)) +
geom_hline(yintercept = 10, color = "black") +
labs(title = "People tend to feel less healthy with age",
subtitle = "Based on over 3700 survey responses",
x = "Self-reported health level",
y = "Age, years",
caption = "Data source: The 2011-2012 US National Health and Nutrition Examination Study") +
theme_minimal() +
theme(plot.title = element_text(face = "bold", size = 10),
plot.subtitle = element_text(size = font_size),
axis.title.y = element_text(hjust = 1, size = font_size),
axis.title.x = element_text(hjust = 1, size = font_size),
axis.text = element_text(color = color_1, size = font_size),
plot.caption = element_text(face = "italic",
color = color_1,
hjust = 0,
size = 7),
plot.margin = margin(0.5, 0.5, 0.5, 0.5, "cm"),
panel.grid.minor = element_blank())
health_data
health_data
health_data$HealthGen
type.of(health_data$HealthGen)
type(health_data$HealthGen)
mode(health_data$HealthGen)
type(health_data$HealthGen)
typeof(health_data$HealthGen)
class(health_data$HealthGen)
is.ordered(health_data$HealthGen)
as.ordered()
?as.ordered
health_data <- NHANES %>%
filter(SurveyYr == "2011_12",
is.na(HealthGen) == FALSE) %>%
select(Age, HealthGen) %>%
mutate(HealthGen = as.ordered(
fct_recode(HealthGen,
"Vgood" = "Very good")
)
)
is.ordered(health_data$HealthGen)
levels(health_data$HealthGen)
color_1 = "dimgray"
font_size = 8
# Drop data that won't be used
health_data <- NHANES %>%
filter(SurveyYr == "2011_12",
is.na(HealthGen) == FALSE) %>%
select(Age, HealthGen) %>%
mutate(HealthGen = as.ordered(
fct_recode(HealthGen,
"Vgood" = "Very good")
)
)
levels(health_data$HealthGen)
# Produce a plot
health_data %>%
ggplot(aes(x = HealthGen, y = Age)) +
geom_boxplot(color = color_1) +
scale_x_discrete(labels = c("Excellent",
"Very good",
"Good",
"Fair",
"Poor")) +
scale_y_continuous(breaks = seq(10, 80, 10)) +
geom_hline(yintercept = 10, color = "black") +
labs(title = "People tend to feel less healthy with age",
subtitle = "Based on over 3700 survey responses",
x = "Self-reported health level",
y = "Age, years",
caption = "Data source: The 2011-2012 US National Health and Nutrition Examination Study") +
theme_minimal() +
theme(plot.title = element_text(face = "bold", size = 10),
plot.subtitle = element_text(size = font_size),
axis.title.y = element_text(hjust = 1, size = font_size),
axis.title.x = element_text(hjust = 1, size = font_size),
axis.text = element_text(color = color_1, size = font_size),
plot.caption = element_text(face = "italic",
color = color_1,
hjust = 0,
size = 7),
plot.margin = margin(0.5, 0.5, 0.5, 0.5, "cm"),
panel.grid.minor = element_blank())
levels(health_data$HealthGen)
?fct_recode
health_data <- NHANES %>%
filter(SurveyYr == "2011_12",
is.na(HealthGen) == FALSE) %>%
select(Age, HealthGen) %>%
mutate(HealthGen = as.ordered(
fct_recode(HealthGen, "Very good" = "Vgood")
)
)
levels(health_data$HealthGen)
color_1 = "dimgray"
font_size = 8
# Drop data that won't be used
health_data <- NHANES %>%
filter(SurveyYr == "2011_12",
is.na(HealthGen) == FALSE) %>%
select(Age, HealthGen) %>%
mutate(HealthGen = as.ordered(
fct_recode(HealthGen, "Very good" = "Vgood")
)
)
levels(health_data$HealthGen)
# Produce a plot
health_data %>%
ggplot(aes(x = HealthGen, y = Age)) +
geom_boxplot(color = color_1) +
scale_x_discrete(labels = c("Excellent",
"Very good",
"Good",
"Fair",
"Poor")) +
scale_y_continuous(breaks = seq(10, 80, 10)) +
geom_hline(yintercept = 10, color = "black") +
labs(title = "People tend to feel less healthy with age",
subtitle = "Based on over 3700 survey responses",
x = "Self-reported health level",
y = "Age, years",
caption = "Data source: The 2011-2012 US National Health and Nutrition                    Examination Study") +
theme_minimal() +
theme(plot.title = element_text(face = "bold", size = 10),
plot.subtitle = element_text(size = font_size),
axis.title.y = element_text(hjust = 1, size = font_size),
axis.title.x = element_text(hjust = 1, size = font_size),
axis.text = element_text(color = color_1, size = font_size),
plot.caption = element_text(face = "italic",
color = color_1,
hjust = 0,
size = 7),
plot.margin = margin(0.5, 0.5, 0.5, 0.5, "cm"),
panel.grid.minor = element_blank())
?cat
color_1 = "dimgray"
font_size = 8
# Drop data that won't be used
health_data <- NHANES %>%
filter(SurveyYr == "2011_12",
is.na(HealthGen) == FALSE) %>%
select(Age, HealthGen) %>%
mutate(HealthGen = as.ordered(
fct_recode(HealthGen, "Very good" = "Vgood")
)
)
levels(health_data$HealthGen)
# Produce a plot
health_data %>%
ggplot(aes(x = HealthGen, y = Age)) +
geom_boxplot(color = color_1) +
scale_x_discrete(labels = c("Excellent",
"Very good",
"Good",
"Fair",
"Poor")) +
scale_y_continuous(breaks = seq(10, 80, 10)) +
geom_hline(yintercept = 10, color = "black") +
labs(title = "People tend to feel less healthy with age",
subtitle = "Based on over 3700 survey responses",
x = "Self-reported health level",
y = "Age, years",
caption = "Data source: The 2011-2012 US National Health and
Nutrition Examination Study") +
theme_minimal() +
theme(plot.title = element_text(face = "bold", size = 10),
plot.subtitle = element_text(size = font_size),
axis.title.y = element_text(hjust = 1, size = font_size),
axis.title.x = element_text(hjust = 1, size = font_size),
axis.text = element_text(color = color_1, size = font_size),
plot.caption = element_text(face = "italic",
color = color_1,
hjust = 0,
size = 7),
plot.margin = margin(0.5, 0.5, 0.5, 0.5, "cm"),
panel.grid.minor = element_blank())
color_1 = "dimgray"
font_size = 8
# Drop data that won't be used
health_data <- NHANES %>%
filter(SurveyYr == "2011_12",
is.na(HealthGen) == FALSE) %>%
select(Age, HealthGen) %>%
mutate(HealthGen = as.ordered(
fct_recode(HealthGen, "Very good" = "Vgood")
)
)
levels(health_data$HealthGen)
# Produce a plot
health_data %>%
ggplot(aes(x = HealthGen, y = Age)) +
geom_boxplot(color = color_1) +
scale_x_discrete(labels = c("Excellent",
"Very good",
"Good",
"Fair",
"Poor")) +
scale_y_continuous(breaks = seq(10, 80, 10)) +
geom_hline(yintercept = 10, color = "black") +
labs(title = "People tend to feel less healthy with age",
subtitle = "Based on over 3700 survey responses",
x = "Self-reported health level",
y = "Age, years",
caption = "Data source: The 2011-2012 US National Health and
Nutrition Examination Study") +
theme_minimal() +
theme(plot.title = element_text(face = "bold", size = 10),
plot.subtitle = element_text(size = font_size),
axis.title.y = element_text(hjust = 1, size = font_size),
axis.title.x = element_text(hjust = 1, size = font_size),
axis.text = element_text(color = color_1, size = font_size),
plot.caption = element_text(face = "italic",
color = color_1,
hjust = 0,
size = 7),
plot.margin = margin(0.5, 0.5, 0.5, 0.5, "cm"),
panel.grid.minor = element_blank())
color_1 = "dimgray"
font_size = 8
# Drop data that won't be used
health_data <- NHANES %>%
filter(SurveyYr == "2011_12",
is.na(HealthGen) == FALSE) %>%
select(Age, HealthGen) %>%
mutate(HealthGen = as.ordered(
fct_recode(HealthGen, "Very good" = "Vgood")
)
)
levels(health_data$HealthGen)
# Produce a plot
health_data %>%
ggplot(aes(x = HealthGen, y = Age)) +
geom_boxplot(color = color_1) +
scale_x_discrete(labels = c("Excellent",
"Very good",
"Good",
"Fair",
"Poor")) +
scale_y_continuous(breaks = seq(10, 80, 10)) +
geom_hline(yintercept = 10, color = "black") +
labs(title = "People tend to feel less healthy with age",
subtitle = "Based on over 3700 survey responses",
x = "Self-reported health level",
y = "Age, years",
caption = "Data source: The 2011-2012 US National Health and
Nutrition Examination Study") +
theme_minimal() +
theme(plot.title = element_text(face = "bold", size = 10),
plot.subtitle = element_text(size = font_size),
axis.title.y = element_text(hjust = 1, size = font_size),
axis.title.x = element_text(hjust = 1, size = font_size),
axis.text = element_text(color = color_1, size = font_size),
plot.caption = element_text(face = "italic",
color = color_1,
hjust = 0,
size = 7),
plot.margin = margin(0.5, 0.5, 0.5, 0.5, "cm"),
panel.grid.minor = element_blank())
health_data %>%
group_by(HealthGen) %>%
summarise(n = n(),
Median = median(Age),
IQR = round(IQR(Age), 1),
Mean = round(mean(Age), 1),
Std.Dev. = round(sd(Age), 1)) %>%
rename('Health Level' = HealthGen) %>%
kbl(caption = "<b>Table 1: Age by health level category (years)<b>",
align = c("lccccc"))
#kable_styling()
